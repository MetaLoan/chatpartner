# 快速开始指南

## 环境准备

### 1. 安装Go
确保已安装Go 1.21或更高版本：
```bash
go version
```

### 2. 安装PostgreSQL
确保PostgreSQL已安装并运行：
```bash
# macOS
brew install postgresql
brew services start postgresql

# 创建数据库
createdb aibot
```

### 3. 安装Node.js（前端）
确保已安装Node.js 16+：
```bash
node --version
npm --version
```

## 后端启动

### 1. 进入后端目录
```bash
cd backend
```

### 2. 安装依赖
```bash
go mod download
```

### 3. 配置环境变量
```bash
cp .env.example .env
```

编辑 `.env` 文件：
```env
# 服务器配置
SERVER_PORT=8080
SERVER_HOST=0.0.0.0

# Telegram API（必需）
TELEGRAM_API_ID=你的api_id
TELEGRAM_API_HASH=你的api_hash

# OpenAI API（必需）
OPENAI_API_KEY=你的openai_api_key
OPENAI_MODEL=gpt-4o-mini

# 数据库配置
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=aibot
DB_SSLMODE=disable
```

### 4. 运行后端
```bash
go run main.go
```

或使用Makefile：
```bash
make run
```

## 前端启动

### 1. 进入前端目录
```bash
cd frontend
```

### 2. 安装依赖
```bash
npm install
```

### 3. 启动开发服务器
```bash
npm run dev
```

前端将在 http://localhost:3000 启动

## 首次使用

### 1. 创建账号
通过前端界面或API创建第一个AI账号：
- 访问 http://localhost:3000
- 进入"账号管理"页面
- 点击"添加账号"
- 填入Telegram API凭证和OpenAI API Key

### 2. 登录账号
- 在账号列表中点击"登录"按钮
- 首次登录需要输入验证码（待实现）

### 3. 添加群组
- 进入"群组管理"页面
- 添加要监听的群组
- 为群组分配AI账号

### 4. 开始使用
- AI会自动监听群组消息
- 根据配置自动生成回复
- 在"消息记录"页面查看发言记录

## 注意事项

1. **首次登录**：gotd库的认证需要验证码，当前版本需要手动实现验证码输入
2. **数据库**：确保PostgreSQL已启动并创建了数据库
3. **API凭证**：确保Telegram和OpenAI的API凭证正确
4. **会话文件**：首次登录后会生成会话文件，保存在 `backend/data/sessions/` 目录

## 故障排除

### 数据库连接失败
- 检查PostgreSQL是否运行
- 检查数据库配置是否正确
- 检查数据库是否存在

### Telegram登录失败
- 检查API ID和API Hash是否正确
- 检查手机号格式（需要包含国家代码）
- 首次登录需要验证码

### OpenAI API错误
- 检查API Key是否正确
- 检查账户余额
- 检查网络连接

