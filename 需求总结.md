# 炒群平台需求总结

## 快速需求清单

### ✅ 核心功能（20项需求）

#### 1. 管理前端 + Telethon登录
- [x] 管理前端界面
- [x] 通过Telethon登录所有AI账号
- [x] 账号状态监控

#### 2. AI账号配置
- [x] 设置AI账号各自的提示词
- [x] 一键批量设置提示词
- [x] 发言时间间隔设置
- [x] 聊天语气设置
- [x] 每个账号指定独立的AI Key
- [x] **活跃时间周期配置**（新增）
  - 支持为每个AI账号独立配置活跃时间周期
  - 支持全局配置活跃时间周期（所有账号默认使用）
  - 支持按星期、日期范围、时间段等多种配置方式
  - 支持时区配置
- [x] **全局主线提示词**（新增）
  - 设置整体群营销的聊天框架和策略
  - 控制AI整体的聊天方向和品牌调性
  - 支持账号提示词与主线提示词的组合
  - 支持版本管理和回滚

#### 3. 群组管理
- [x] 设置多个群
- [x] 每个群分配不同的AI账号
- [x] 群组与账号关联管理

#### 4. 发言记录与统计
- [x] 查看各AI账号在各群的发言记录
- [x] 统计发言次数
- [x] 统计活跃时间
- [x] 导出聊天记录

#### 5. 智能讨论
- [x] 根据BOT或指定账号消息形成讨论主题
- [x] 围绕主题进行讨论
- [x] 引用之前的发言内容
- [x] 监测当前聊天话题

#### 6. 发言控制
- [x] 设置发言频率
- [x] 设置发言时间段
- [x] 避免过于频繁打扰
- [x] **活跃时间周期控制**（新增）
  - 在活跃时间周期内才允许主动发言
  - 非活跃时间段内仅响应@提及（可配置）

#### 7. 自动回复
- [x] @AI账号时自动回复
- [x] 自动回复功能配置

#### 8. 优先级管理
- [x] 设置AI账号优先级
- [x] 优先级高的账号优先发言

#### 9. 黑名单功能
- [x] 设置黑名单
- [x] 避免与黑名单账号互动

#### 10. 情感分析
- [x] 分析群内成员情绪
- [x] 根据情绪调整发言内容和语气

#### 11. 学习优化
- [x] 根据反馈优化发言
- [x] 不断优化发言内容和方式

#### 12. 多语言支持
- [x] 根据群内语言偏好调整发言语言
- [x] 多语言配置

#### 13. 定时任务
- [x] 在特定时间点执行特定发言
- [x] 定时任务管理

#### 14. 内容过滤
- [x] 过滤不适当或敏感内容
- [x] 内容审核规则

#### 15. 统计报表
- [x] 定期生成活跃度报表
- [x] 生成AI账号表现报表
- [x] 数据可视化

#### 16. 话题监测
- [x] 监测当前AI聊天话题
- [x] 话题展示和分析

#### 17. AI Key管理
- [x] 每个账号指定独立AI Key
- [x] 方便更换AI模型

#### 18. 活跃时间周期配置（新增）
- [x] 账号独立配置活跃时间周期
- [x] 全局配置活跃时间周期
- [x] 多种时间周期配置方式（星期/日期/时间段）
- [x] 时区支持
- [x] 时间周期优先级管理

#### 19. 全局主线提示词（新增）
- [x] 设置整体群营销的聊天框架
- [x] 定义品牌调性和核心话题方向
- [x] 控制AI整体的聊天策略
- [x] 支持与账号提示词组合（框架/叠加/覆盖模式）
- [x] 版本管理和历史记录
- [x] 一键应用到所有账号

---

## 功能模块划分

### 📱 前端管理界面
1. 仪表盘（Dashboard）
2. 账号管理页面
3. 群组管理页面
4. 发言配置页面
5. 数据统计页面
6. 系统设置页面

### 🤖 账号管理模块
1. AI账号登录（Telethon）
2. 账号配置管理
3. 批量操作功能
4. 账号状态监控

### 💬 群组管理模块
1. 群组信息管理
2. 账号-群组关联
3. 群组状态监控

### 📝 发言管理模块
1. 智能发言
2. 频率控制
3. 时间段控制
4. 定时任务

### 🔄 自动回复模块
1. @提及回复
2. 关键词回复

### 🛡️ 内容管理模块
1. 内容过滤
2. 黑名单管理

### 🧠 智能分析模块
1. 情感分析
2. 话题监测
3. 学习优化

### 🌐 多语言模块
1. 语言检测
2. 语言切换

### 📊 数据统计模块
1. 发言记录
2. 统计分析
3. 报表生成

---

## 技术要点

### 后端技术栈
- FastAPI（Web框架）
- PostgreSQL（数据库）
- Redis（缓存/消息队列）
- Celery（异步任务）
- Telethon（Telegram客户端）

### 前端技术栈
- React + TypeScript
- Ant Design / Material-UI
- WebSocket（实时通信）
- ECharts（数据可视化）

### AI服务
- OpenAI API（支持多模型）
- 情感分析服务
- 语言检测服务

---

## 开发优先级

### P0 - 必须实现（MVP）
1. 账号管理
2. 群组管理
3. 基础发言功能
4. 发言记录查看
5. 基础前端界面

### P1 - 重要功能
1. 自动回复
2. 定时任务
3. 内容过滤
4. 基础统计
5. 黑名单

### P2 - 增强功能
1. 情感分析
2. 话题监测
3. 学习优化
4. 多语言支持
5. 高级报表

### P3 - 优化功能
1. 性能优化
2. 用户体验优化
3. 高级功能扩展

---

## 关键数据模型

1. **AI账号** - 存储账号信息、配置、状态
2. **群组** - 存储群组信息
3. **账号-群组关联** - 多对多关系，包含优先级等配置
4. **发言记录** - 存储所有发言，包含话题、情感等
5. **配置** - 账号和系统的各种配置
6. **定时任务** - 定时发言任务
7. **黑名单** - 用户和群组黑名单
8. **统计报表** - 生成的报表数据
9. **活跃时间周期** - 账号级别和全局级别的时间周期配置

---

## 注意事项

### ⚠️ 合规风险
- 遵守Telegram使用条款
- 避免过度自动化
- 内容审核机制

### ⚠️ 技术风险
- API频率限制
- 账号封禁风险
- 高并发处理

### ⚠️ 成本控制
- AI API调用成本
- 服务器资源成本
- 数据存储成本

---

## 相关文档

- [详细需求文档](./需求文档.md)
- [项目结构规划](./项目结构规划.md)
- [开发计划](./开发计划.md)

